(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{451:function(s,a,t){"use strict";t.r(a);var e=t(8),r=Object(e.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("p",[s._v("FastDFS是一个开源的分布式文件系统，她对文件进行管理，功能包括：文件存储、文件同步、文件访问（文件上传、文件下载）等，解决了大容量存储和负载均衡的问题。特别适合以文件为载体的在线服务，如相册网站、视频网站等等。")]),s._v(" "),t("h2",{attrs:{id:"上传安装介质"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#上传安装介质"}},[s._v("#")]),s._v(" 上传安装介质")]),s._v(" "),t("p",[s._v("本次安装以源码进行安装需要下载以下文件：")]),s._v(" "),t("ol",[t("li",[t("a",{attrs:{href:"https://github.com/happyfish100/fastdfs.git",target:"_blank",rel:"noopener noreferrer"}},[s._v("fastdfs-master.zip"),t("OutboundLink")],1)]),s._v(" "),t("li",[t("a",{attrs:{href:"https://github.com/happyfish100/libfastcommon.git",target:"_blank",rel:"noopener noreferrer"}},[s._v("libfastcommon.git"),t("OutboundLink")],1)])]),s._v(" "),t("p",[s._v("上传安装文件到服务器的/data目录")]),s._v(" "),t("p",[s._v("本次安装的服务器有")]),s._v(" "),t("ol",[t("li",[t("em",[s._v(".")]),s._v(".*.11")]),s._v(" "),t("li",[t("em",[s._v(".")]),s._v(".*.12")]),s._v(" "),t("li",[t("em",[s._v(".")]),s._v(".*.13")])]),s._v(" "),t("h2",{attrs:{id:"开放端口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#开放端口"}},[s._v("#")]),s._v(" 开放端口")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v(" firewall-cmd --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("22122")]),s._v("/tcp --permanent "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v("  firewall-cmd --add-port"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("23000")]),s._v("/tcp --permanent "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" firewall-cmd --reload\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"解压安装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#解压安装"}},[s._v("#")]),s._v(" 解压安装")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("yum "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" -y\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" /data/libfastcommon-master.zip -d /data/fastdfs\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("unzip")]),s._v(" /data/fastdfs-master.zip -d /data/fastdfs\n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /data/fastdfs/libfastcommon-master/ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./make.sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./make.sh "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" \n"),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /data/fastdfs/fastdfs-master/ "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./make.sh "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" ./make.sh "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v("\n \n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"创建文件夹"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#创建文件夹"}},[s._v("#")]),s._v(" 创建文件夹")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /data/fastdfs/data/tracker\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("mkdir")]),s._v(" -p /data/fastdfs/data/storage\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h2",{attrs:{id:"拷贝配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#拷贝配置文件"}},[s._v("#")]),s._v(" 拷贝配置文件")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/fdfs/tracker.conf.sample /etc/fdfs/tracker.conf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/fdfs/storage.conf.sample /etc/fdfs/storage.conf "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("cp")]),s._v(" /etc/fdfs/client.conf.sample /etc/fdfs/client.conf\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"配置tracker"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置tracker"}},[s._v("#")]),s._v(" 配置tracker")]),s._v(" "),t("p",[s._v("修改配置文件*/etc/fdfs/tracker.conf* 修改位置有")]),s._v(" "),t("ol",[t("li",[s._v("22行："),t("code",[s._v("base_path=/data/fastdfs/data/tracker")])]),s._v(" "),t("li",[s._v("54行："),t("code",[s._v("store_group=group")])]),s._v(" "),t("li",[s._v("98行："),t("code",[s._v("run_by_group=root")])]),s._v(" "),t("li",[s._v("102行："),t("code",[s._v("run_by_user=root")])])]),s._v(" "),t("h2",{attrs:{id:"配置storage"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置storage"}},[s._v("#")]),s._v(" 配置storage")]),s._v(" "),t("p",[s._v("修改配置文件*/etc/fdfs/storage.conf* 修改位置有")]),s._v(" "),t("ol",[t("li",[s._v("11行："),t("code",[s._v("group_name=group")])]),s._v(" "),t("li",[s._v("41行："),t("code",[s._v("base_path=/data/fastdfs/data/storage")])]),s._v(" "),t("li",[s._v("111行："),t("code",[s._v("store_path0=/data/fastdfs/data/storage")])]),s._v(" "),t("li",[s._v("119行："),t("code",[s._v("tracker_server=*.*.*.11:22122,*.*.*.12:22122,*.*.*.13:22122")])]),s._v(" "),t("li",[s._v("134行："),t("code",[s._v("run_by_group=root")])]),s._v(" "),t("li",[s._v("138行："),t("code",[s._v("run_by_user=root")])])]),s._v(" "),t("h2",{attrs:{id:"启动"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#启动"}},[s._v("#")]),s._v(" 启动")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("/usr/bin/fdfs_trackerd /etc/fdfs/tracker.conf start "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("&&")]),s._v(" /usr/bin/fdfs_storaged /etc/fdfs/storage.conf start\n\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h2",{attrs:{id:"配置客户端"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#配置客户端"}},[s._v("#")]),s._v(" 配置客户端")]),s._v(" "),t("p",[s._v("fdfs自带了一个客户端用户查看集群状态，测试上传等功能，首先配置好"),t("code",[s._v("/etc/fdfs/client.conf")]),s._v("配置,修改其中的tracker的地址即可")]),s._v(" "),t("h2",{attrs:{id:"查看集群状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看集群状态"}},[s._v("#")]),s._v(" 查看集群状态")]),s._v(" "),t("p",[s._v("在*."),t("em",[s._v(".")]),s._v(".11服务器上查看状态")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("fdfs_monitor /etc/fdfs/storage.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"查看storage状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#查看storage状态"}},[s._v("#")]),s._v(" 查看storage状态")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("fdfs_monitor /etc/fdfs/client.conf\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"测试上传"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#测试上传"}},[s._v("#")]),s._v(" 测试上传")]),s._v(" "),t("p",[s._v("使用客户端上传命令为")]),s._v(" "),t("div",{staticClass:"language-shell line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-shell"}},[t("code",[s._v("/usr/bin/fdfs_test /etc/fdfs/client.conf upload Burner.jpg\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"结束语"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#结束语"}},[s._v("#")]),s._v(" 结束语")]),s._v(" "),t("p",[s._v("fastdfs整体结构简单来说就是如下，tracker管理storage状态，storage进行存储，所以在上传时需要首先从tracker获取storage的地址，然后链接storage进行上传文件，fsatdfs还包含了一个文件访问模块，基于Nginx实现的一个文件访问，该模块可以做到整个集群的文件访问，如果某些storage的文件有缺失，只要有storage的文件是完整的都不影响访问，本次只使用了文件存储，没有使用文件访问故没有安装该模块。")])])}),[],!1,null,null,null);a.default=r.exports}}]);